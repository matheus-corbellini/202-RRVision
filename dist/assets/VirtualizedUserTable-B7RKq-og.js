import{r,j as e,F as x,o as U,p as E,q as R,a as k,b as M,c as w,d as S,e as z}from"./index-DC_hWe-s.js";const A=r.memo(({users:a,loading:u,onEdit:p,onDelete:j,onSort:n,sortField:v,sortDirection:N,itemHeight:l=80,containerHeight:c=600,overscan:o=5})=>{const d=r.useRef(null),[m,h]=r.useState(0),f=s=>{switch(s){case"admin":return"role-admin";case"operator":return"role-operator";case"user":return"role-user";default:return"role-user"}},b=s=>{switch(s){case"admin":return"Administrador";case"operator":return"Operador";case"user":return"Usuário";default:return"Usuário"}},t=s=>v!==s?e.jsx(w,{}):N==="asc"?e.jsx(S,{}):e.jsx(z,{}),i=r.useMemo(()=>{const s=Math.floor(m/l),C=Math.min(s+Math.ceil(c/l)+o,a.length);return{start:Math.max(0,s-o),end:C}},[m,l,c,o,a.length]),y=r.useMemo(()=>a.slice(i.start,i.end),[a,i]),T=a.length*l,g=i.start*l,F=s=>{h(s.currentTarget.scrollTop)};return r.useEffect(()=>{d.current&&(d.current.scrollTop=0,h(0))},[a.length]),u?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Carregando usuários..."})]}):a.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(x,{}),e.jsx("p",{children:"Nenhum usuário encontrado"})]}):e.jsxs("div",{className:"virtualized-table-container",children:[e.jsxs("div",{className:"table-header",children:[e.jsxs("div",{className:"sortable-header",onClick:()=>n("name"),children:["Nome ",t("name")]}),e.jsxs("div",{className:"sortable-header",onClick:()=>n("email"),children:["E-mail ",t("email")]}),e.jsxs("div",{className:"sortable-header",onClick:()=>n("company"),children:["Empresa ",t("company")]}),e.jsx("div",{children:"Telefone"}),e.jsxs("div",{className:"sortable-header",onClick:()=>n("userType"),children:["Papel ",t("userType")]}),e.jsx("div",{children:"Ações"})]}),e.jsx("div",{ref:d,className:"virtualized-container",style:{height:c,overflow:"auto"},onScroll:F,children:e.jsx("div",{style:{height:T,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${g}px)`,position:"absolute",top:0,left:0,right:0},children:y.map(s=>e.jsxs("div",{className:"table-row",style:{height:l},children:[e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-avatar",children:s.name?.charAt(0)?.toUpperCase()||"U"}),e.jsxs("div",{children:[e.jsx("div",{className:"user-name",children:s.name||s.displayName||"—"}),e.jsx("div",{className:"user-type",children:s.userType})]})]}),e.jsxs("div",{className:"email-cell",children:[e.jsx(U,{}),s.email]}),e.jsxs("div",{className:"company-cell",children:[e.jsx(E,{}),s.company||"—"]}),e.jsxs("div",{className:"phone-cell",children:[e.jsx(R,{}),s.phone||"—"]}),e.jsx("div",{className:"role-cell",children:e.jsxs("span",{className:`role-badge ${f(s.userType)}`,children:[e.jsx(x,{}),b(s.userType)]})}),e.jsxs("div",{className:"actions-cell",children:[e.jsx("button",{className:"action-btn edit-btn",onClick:()=>p(s),title:"Editar usuário",children:e.jsx(k,{})}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>j(s),title:"Remover usuário",children:e.jsx(M,{})})]})]},s.id))})})})]})});A.displayName="VirtualizedUserTable";export{A as default};
